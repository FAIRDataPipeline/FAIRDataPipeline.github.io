<!doctype html><html data-scroll=0 lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Standardised data type API # Unless otherwise specified this document uses the “current” metadata scheme defined in the &ldquo;Metadata and data representation” document. You do not need to have read that document to be able to read and understand (the majority of) this one.
The standardised data type API is defined more in terms of file formats than it is in terms of data types. There are two file formats: parameter files, and hdf5 files."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Standardised data type API # Unless otherwise specified this document uses the “current” metadata scheme defined in the &ldquo;Metadata and data representation” document. You do not need to have read that document to be able to read and understand (the majority of) this one.
The standardised data type API is defined more in terms of file formats than it is in terms of data types. There are two file formats: parameter files, and hdf5 files."><meta property="og:type" content="article"><meta property="og:url" content="https://www.fairdatapipeline.org/disabled/API/python/standard_api/"><meta property="article:section" content="disabled"><meta property="article:modified_time" content="2023-11-01T16:57:51+00:00"><title>Standard API | FAIRDataPipeline</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=stylesheet href=/book.min.78e0f2c3e0da3b6a0d761a0e01656154c8d89cc8742b7e517cbc86441aab779b.css integrity="sha256-eODyw+DaO2oNdhoOAWVhVMjYnMh0K35RfLyGRBqrd5s=" crossorigin=anonymous><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><script defer type=text/javascript src=/lunr.min.js></script><script defer src=/en.fancy-search.min.556f0df18637eac3225ba1eb161675d584670b1ffe8c4ae02cdd1a70cb1c0747.js integrity="sha256-VW8N8YY36sMiW6HrFhZ11YRnCx/+jErgLN0acMscB0c="></script><script defer src=/scroll.js></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><div class=custom-header><div class="custom-flex container flex"><div class=custom-left><div class=custom-brand><h2 class=custom-brand-text><a href=/><img src=/logo.jpg alt=Logo><span>FAIRDataPipeline</span></a></h2></div></div><div class=custom-search-container><div class=search-top><div class=search><div class=search-input-wrap><input type=text id=search-input class=search-input tabindex=0 placeholder="Search FAIRDataPipeline" aria-label="Search FAIRDataPipeline" autocomplete=off>
<label for=search-input class=search-label><div class=search-svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></div></label></div><div id=search-results class=search-results></div></div></div></div></div></div><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><ul><li><a href=/docs/quick_start/>Quick Start</a><ul></ul></li><li><input type=checkbox id=section-c23a8426ae16a2e4b31af943be5a83ad class=toggle>
<label for=section-c23a8426ae16a2e4b31af943be5a83ad class="flex justify-between"><a href=/docs/cli/>FAIR CLI</a></label><ul><li><a href=/docs/cli/installation/>FAIR CLI Installation</a><ul></ul></li><li><a href=/docs/cli/cli_commands/>FAIR CLI Commands</a><ul><li><a href=/docs/cli/cli_commands/local/>CLI Local Command(s)</a><ul></ul></li></ul></li></ul></li><li><input type=checkbox id=section-5dfc13e48f718e798acbc17acf59aa69 class=toggle>
<label for=section-5dfc13e48f718e798acbc17acf59aa69 class="flex justify-between"><a href=/docs/data_registry/>FAIR Data Registry</a></label><ul><li><input type=checkbox id=section-d1950e6675ca179342643f05b0cd3a1e class=toggle>
<label for=section-d1950e6675ca179342643f05b0cd3a1e class="flex justify-between"><a href=/docs/data_registry/local_registry/>Local Registry</a></label><ul><li><input type=checkbox id=section-2d0d992296ec1e609d2a1b524d0a4b4e class=toggle>
<label for=section-2d0d992296ec1e609d2a1b524d0a4b4e class="flex justify-between"><a href=/docs/data_registry/local_registry/installation/>Installation</a></label><ul></ul></li></ul></li><li><input type=checkbox id=section-13093dc293a5e4fc7f97da54f629aac7 class=toggle>
<label for=section-13093dc293a5e4fc7f97da54f629aac7 class="flex justify-between"><a href=/docs/data_registry/remote_registry/>Remote Registry</a></label><ul><li><a href=/docs/data_registry/remote_registry/installation/>Installation</a><ul></ul></li><li><a href=https://data.fairdatapipeline.org target=_blank rel=noopener>Example Remote Registry</a><ul></ul></li></ul></li><li><a href=/docs/data_registry/schema/>Schema Description</a></li><li><a href=/docs/data_registry/prov_report/>Provenance Report</a></li><li><a href=/docs/data_registry/ro_crate/>RO Crate Objects</a></li></ul></li><li><input type=checkbox id=section-bf7b3283e3790c00c8caaa140299052b class=toggle>
<label for=section-bf7b3283e3790c00c8caaa140299052b class="flex justify-between"><a href=/docs/api/>Modelling APIs</a></label><ul><li><a href=/docs/api/r/>R</a><ul></ul></li><li><a href=/docs/api/julia/>Julia</a><ul></ul></li><li><a href=/docs/api/python/>Python</a><ul></ul></li><li><input type=checkbox id=section-3752dbeb9567711c46fb17da5ba1dc59 class=toggle>
<label for=section-3752dbeb9567711c46fb17da5ba1dc59 class="flex justify-between"><a href=/docs/api/java/>Java</a></label><ul><li><a href=/docs/api/java/coderun/>Coderun</a></li><li><a href=/docs/api/java/issues/>Issues</a></li><li><a href=/docs/api/java/parameters/>Parameters</a></li><li><a href=/docs/api/java/hdf5/>Hdf5</a></li><li><a href=/docs/api/java/run/>Run</a></li><li><a href=/docs/api/java/debug/>Debug</a></li></ul></li><li><a href=/docs/api/c/>C</a><ul></ul></li><li><a href=/docs/api/cpp/>C++</a><ul></ul></li><li><a href=/docs/api/fortran/>FORTRAN</a><ul></ul></li></ul></li><li><a href=/docs/jargon_buster/>Jargon buster</a><ul></ul></li><li><a href=/docs/repository_status/>Repository Status</a><ul></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Standard API</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#standardised-data-type-api>Standardised data type API</a><ul><li><a href=#initialisation>Initialisation</a></li><li><a href=#additional-metadata-on-write>Additional metadata on write</a></li><li><a href=#parameter-files>parameter files</a></li><li><a href=#metadata>Metadata</a></li><li><a href=#alternative-metadata>Alternative metadata</a></li><li><a href=#file-format>File format</a></li><li><a href=#distributions>Distributions</a></li><li><a href=#api-functions>API functions</a></li><li><a href=#hdf5-files>HDF5 files</a></li><li><a href=#metadata-1>Metadata</a></li><li><a href=#alternative-metadata-1>Alternative metadata</a></li><li><a href=#file-format-1>File format</a></li><li><a href=#array-format>array format</a></li><li><a href=#table-format>table format</a></li><li><a href=#api-functions-1>API functions</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=standardised-data-type-api>Standardised data type API
<a class=anchor href=#standardised-data-type-api>#</a></h1><p>Unless otherwise specified this document uses the “current” metadata scheme defined in the &ldquo;Metadata and data representation” document. You do not need to have read that document to be able to read and understand (the majority of) this one.</p><p>The standardised data type API is defined more in terms of file formats than it is in terms of data types. There are two file formats: parameter files, and hdf5 files. Parameter files store “small” parameter data in toml format, representing individual parameters. HDF5 files are used to store structured data, encoded either as “arrays” or “tables”. Both formats are described in more detail below, alongside API functions used to interact with them.</p><h2 id=initialisation>Initialisation
<a class=anchor href=#initialisation>#</a></h2><p>The standard API must be initialised with the model URI and git sha, which should then be set as run-level metadata using the file API set_metadata function.</p><h2 id=additional-metadata-on-write>Additional metadata on write
<a class=anchor href=#additional-metadata-on-write>#</a></h2><p>The write functions all accept <code>description</code> and <code>issues</code> arguments, which are passed through to the file API as component-level metadata.</p><h2 id=parameter-files>parameter files
<a class=anchor href=#parameter-files>#</a></h2><p>A parameter file contains representations of one or more parameters, each a single number, possibly with some associated uncertainty. Parameters may by represented as point-estimates, parametric distributions, and sample data.</p><h2 id=metadata>Metadata
<a class=anchor href=#metadata>#</a></h2><pre tabindex=0><code>extension = &#34;toml&#34; 
</code></pre><h2 id=alternative-metadata>Alternative metadata
<a class=anchor href=#alternative-metadata>#</a></h2><pre tabindex=0><code>format = &#34;parameter&#34;  
extension = &#34;toml&#34; (could be inferred) 
</code></pre><h2 id=file-format>File format
<a class=anchor href=#file-format>#</a></h2><p>Parameters are stored in toml-formatted files, with the extension “toml”, containing sections corresponding to different components. The following is an example of the internal encoding, defining three components: &ldquo;<code>my-point-estimate</code>&rdquo;, &ldquo;<code>my-distribution</code>&rdquo;, and &ldquo;<code>my-samples</code>&rdquo;:</p><pre tabindex=0><code>[my-point-estimate] 
type = &#34;point-estimate&#34; 
value = 0.1 

[my-distribution] 
type = &#34;distribution&#34; 
distribution = &#34;gamma&#34; 
shape = 1 
scale = 2 
 
[my-samples] 
type = &#34;samples&#34; 
samples = [1.0, 2.0, 3.0, 4.0, 5.0] 
</code></pre><p>Point estimates are used when our knowledge of the parameter is only sufficient for a single value, with no notion of uncertainty. A point estimate component must have type = &ldquo;point-estimate&rdquo; and a value that is either a float or an integer.</p><p>Distributions are used when our knowledge of a parameter can be represented by a parametric distribution. A distribution component must have type = &ldquo;distribution&rdquo;, a distribution set to a string name of the distribution, and other parameters determined by the distribution. The set of distributions required to be supported is currently undefined.</p><p>Samples are used when our knowledge of a parameter is represented by samples, from either empirical measurements, or a posterior distribution. A samples component must have type = &ldquo;samples&rdquo; and a value that is a list of floats and integers.</p><h2 id=distributions>Distributions
<a class=anchor href=#distributions>#</a></h2><p>The supported distributions,each with a link to information about their parameterisation, and their standardised parameter names are as follows:</p><table><thead><tr><th>Distribution</th><th>Standardised parameter names</th></tr></thead><tbody><tr><td>categorical (non-standard)</td><td>bins (string array), weights (float array)</td></tr><tr><td>gamma</td><td>k (float), theta (float)</td></tr><tr><td>normal</td><td>mu (float), sigma (float)</td></tr><tr><td>uniform</td><td>a (float), b (float)</td></tr><tr><td>poisson</td><td>lambda (float)</td></tr><tr><td>exponential</td><td>lambda (float)</td></tr><tr><td>beta</td><td>alpha (float), beta (float)</td></tr><tr><td>binomial</td><td>n (int), p (float)</td></tr><tr><td>multinomial</td><td>n (int), p (float array)</td></tr></tbody></table><h2 id=api-functions>API functions
<a class=anchor href=#api-functions>#</a></h2><p><code>read_estimate(data_product, component) -> float or integer</code></p><p>If the component is represented as a point estimate, return that value.</p><p>If the component is represented as a distribution, return the distribution mean.</p><p>If the component is represented as samples, return the sample mean.</p><p><code>read_distribution(data_product, component) -> distribution object</code></p><p>If the component is represented as a point estimate, fail.</p><p>If the component is represented as a distribution, return an object representing that distribution.</p><p>If the component is represented as samples, failreturn an empirical distribution.</p><p><code>read_samples(data_product, component) -> list of floats or integers</code></p><p>If the component is represented as a point estimate, fail.</p><p>If the component is represented as a distribution, fail.</p><p>If the component is represented as samples, return the samples.</p><p><code>write_estimate(data_product, component, estimate, description, issues)</code></p><p><code>write_distribution(data_product, component, distribution object, description, issues)</code></p><p><code>write_samples(data_product, component, samples, description, issues)</code></p><h2 id=hdf5-files>HDF5 files
<a class=anchor href=#hdf5-files>#</a></h2><p>HDF5 files contain structured data, encoded as either an “array”, or a “table”, both of which are described in more detail below.</p><h2 id=metadata-1>Metadata
<a class=anchor href=#metadata-1>#</a></h2><p>extension = &ldquo;h5&rdquo;</p><h2 id=alternative-metadata-1>Alternative metadata
<a class=anchor href=#alternative-metadata-1>#</a></h2><p>format = &ldquo;hdf5&rdquo;<br>extension = &ldquo;h5&rdquo; (could be inferred)</p><h2 id=file-format-1>File format
<a class=anchor href=#file-format-1>#</a></h2><p>HDF5 files are stored with the extension “h5”. Internally, each component is stored in a different (possibly nested) group, where the full path defines the component name (<em>e.g.</em> “path/to/component”). Inside the group for each component is either a value named “array”, or a value named “table”. It is an error for there to be both.</p><h2 id=array-format>array format
<a class=anchor href=#array-format>#</a></h2><dl><dt>{component}/array</dt><dd>An n-dimensional array of numerical data</dd><dt>{component}/Dimension_{i}_title</dt><dd>The string name of dimension
<link rel=stylesheet href=/katex/katex.min.css><script defer src=/katex/katex.min.js></script><script defer src=/katex/auto-render.min.js onload=renderMathInElement(document.body)></script><span>\(i\)</span></dd><dt>{component}/Dimension_{i}_names</dt><dd>String labels for dimension <span>\(i\)</span></dd><dt>{component}/Dimension_{i}_values</dt><dd>Values for dimension <span>\(i\)</span></dd><dt>{component}/Dimension_{i}_units</dt><dd>Units for dimension <span>\(i\)</span></dd><dt>{component}/units</dt><dd>Units for the data in array</dd></dl><h2 id=table-format>table format
<a class=anchor href=#table-format>#</a></h2><dl><dt>{component}/table</dt><dd>A dataframe</dd><dt>{component}/row_names</dt><dd>String labels for the row axis</dd><dt>{component}/column_units</dt><dd>Units for the columns</dd></dl><h2 id=api-functions-1>API functions
<a class=anchor href=#api-functions-1>#</a></h2><p><code>read_array(data_product, component) -> array</code></p><p>If the component does not terminate in an array-formatted value, raise an error.</p><p>Return an array, currently with no structural information.</p><p><code>read_table(data_product, component) -> dataframe</code></p><p>If the component does not terminate in a table-formatted value, raise an error.</p><p>Return a dataframe, with labelled columns.</p><p><code>write_array(data_product, component, array, description, issues)</code></p><p><code>write_tab</code></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/FAIRDataPipeline/FDP_hugo/commit/0d6e81dfc45a2b286d476f8cd9cd80fdf58427f3 title='Last modified by Ryan J Field | November 1, 2023' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>November 1, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#standardised-data-type-api>Standardised data type API</a><ul><li><a href=#initialisation>Initialisation</a></li><li><a href=#additional-metadata-on-write>Additional metadata on write</a></li><li><a href=#parameter-files>parameter files</a></li><li><a href=#metadata>Metadata</a></li><li><a href=#alternative-metadata>Alternative metadata</a></li><li><a href=#file-format>File format</a></li><li><a href=#distributions>Distributions</a></li><li><a href=#api-functions>API functions</a></li><li><a href=#hdf5-files>HDF5 files</a></li><li><a href=#metadata-1>Metadata</a></li><li><a href=#alternative-metadata-1>Alternative metadata</a></li><li><a href=#file-format-1>File format</a></li><li><a href=#array-format>array format</a></li><li><a href=#table-format>table format</a></li><li><a href=#api-functions-1>API functions</a></li></ul></li></ul></nav></div></aside></main></body></html>