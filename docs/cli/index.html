<!doctype html><html data-scroll=0 lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Data pipeline # The data pipeline is moving towards this new structure:
The API is accessed as a session, which corresponds in the registry to a code run. All reads and writes are logged directly to a local registry as the session progresses, as is the script which generates that i/o. Files are identified by their metadata, though the metadata is different for reads (where the files must exist) and writes (where they must not)."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:title" content="FAIR CLI"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://www.fairdatapipeline.org/docs/cli/"><title>FAIR CLI | FAIRDataPipeline</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png><link rel=stylesheet href=/book.min.78e0f2c3e0da3b6a0d761a0e01656154c8d89cc8742b7e517cbc86441aab779b.css integrity="sha256-eODyw+DaO2oNdhoOAWVhVMjYnMh0K35RfLyGRBqrd5s=" crossorigin=anonymous><script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script><link rel=alternate type=application/rss+xml href=https://www.fairdatapipeline.org/docs/cli/index.xml title=FAIRDataPipeline><script defer type=text/javascript src=/lunr.min.js></script><script defer src=/en.fancy-search.min.7822baa6f0611ec360fb138b3e4a6423c206a7c1573dee1994308ad933184c6c.js integrity="sha256-eCK6pvBhHsNg+xOLPkpkI8IGp8FXPe4ZlDCK2TMYTGw="></script><script defer src=/scroll.js></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><div class=custom-header><div class="custom-flex container flex"><div class=custom-left><div class=custom-brand><h2 class=custom-brand-text><a href=/><img src=/logo.jpg alt=Logo><span>FAIRDataPipeline</span></a></h2></div></div><div class=custom-search-container><div class=search-top><div class=search><div class=search-input-wrap><input type=text id=search-input class=search-input tabindex=0 placeholder="Search FAIRDataPipeline" aria-label="Search FAIRDataPipeline" autocomplete=off>
<label for=search-input class=search-label><div class=search-svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></div></label></div><div id=search-results class=search-results></div></div></div></div></div></div><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><ul><li><a href=/docs/quick_start/>Quick Start</a><ul></ul></li><li><input type=checkbox id=section-c23a8426ae16a2e4b31af943be5a83ad class=toggle checked>
<label for=section-c23a8426ae16a2e4b31af943be5a83ad class="flex justify-between"><a href=/docs/cli/ class=active>FAIR CLI</a></label><ul><li><a href=/docs/cli/installation/>FAIR CLI Installation</a><ul></ul></li><li><a href=/docs/cli/cli_commands/>FAIR CLI Commands</a><ul></ul></li></ul></li><li><input type=checkbox id=section-5dfc13e48f718e798acbc17acf59aa69 class=toggle>
<label for=section-5dfc13e48f718e798acbc17acf59aa69 class="flex justify-between"><a href=/docs/data_registry/>FAIR Data Registry</a></label><ul><li><input type=checkbox id=section-d1950e6675ca179342643f05b0cd3a1e class=toggle>
<label for=section-d1950e6675ca179342643f05b0cd3a1e class="flex justify-between"><a href=/docs/data_registry/local_registry/>Local Registry</a></label><ul><li><input type=checkbox id=section-2d0d992296ec1e609d2a1b524d0a4b4e class=toggle>
<label for=section-2d0d992296ec1e609d2a1b524d0a4b4e class="flex justify-between"><a href=/docs/data_registry/local_registry/installation/>Installation</a></label><ul></ul></li></ul></li><li><input type=checkbox id=section-13093dc293a5e4fc7f97da54f629aac7 class=toggle>
<label for=section-13093dc293a5e4fc7f97da54f629aac7 class="flex justify-between"><a href=/docs/data_registry/remote_registry/>Remote Registry</a></label><ul><li><a href=/docs/data_registry/remote_registry/installation/>Installation</a><ul></ul></li><li><a href=https://data.fairdatapipeline.org target=_blank rel=noopener>Example Remote Registry</a><ul></ul></li></ul></li><li><a href=/docs/data_registry/schema/>Schema Description</a></li><li><a href=/docs/data_registry/prov_report/>Provenance Report</a></li><li><a href=/docs/data_registry/ro_crate/>RO Crate Objects</a></li></ul></li><li><input type=checkbox id=section-bf7b3283e3790c00c8caaa140299052b class=toggle>
<label for=section-bf7b3283e3790c00c8caaa140299052b class="flex justify-between"><a href=/docs/api/>Modelling APIs</a></label><ul><li><a href=/docs/api/r/>R</a><ul></ul></li><li><a href=/docs/api/julia/>Julia</a><ul></ul></li><li><a href=/docs/api/python/>Python</a><ul></ul></li><li><input type=checkbox id=section-3752dbeb9567711c46fb17da5ba1dc59 class=toggle>
<label for=section-3752dbeb9567711c46fb17da5ba1dc59 class="flex justify-between"><a href=/docs/api/java/>Java</a></label><ul><li><a href=/docs/api/java/coderun/>Coderun</a></li><li><a href=/docs/api/java/issues/>Issues</a></li><li><a href=/docs/api/java/parameters/>Parameters</a></li><li><a href=/docs/api/java/hdf5/>Hdf5</a></li><li><a href=/docs/api/java/run/>Run</a></li><li><a href=/docs/api/java/debug/>Debug</a></li></ul></li><li><a href=/docs/api/c/>C</a><ul></ul></li><li><a href=/docs/api/cpp/>C++</a><ul></ul></li><li><a href=/docs/api/fortran/>FORTRAN</a><ul></ul></li></ul></li><li><a href=/docs/jargon_buster/>Jargon buster</a><ul></ul></li><li><a href=/docs/repository_status/>Repository Status</a><ul></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>FAIR CLI</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#data-pipeline>Data pipeline</a></li></ul></nav></aside></header><article class=markdown><h1 id=data-pipeline>Data pipeline
<a class=anchor href=#data-pipeline>#</a></h1><p>The data pipeline is moving towards this new structure:</p><p><img src=scrc-api-new.svg alt="SCRC Data API design figure"></p><p>The API is accessed as a <em>session</em>, which corresponds in the registry to a <em>code run</em>. All reads and writes are logged directly to a local registry as the session progresses, as is the script which generates that i/o. Files are identified by their metadata, though the metadata is different for reads (where the files must exist) and writes (where they must not). The metadata is also different for <em>files in core pipeline data formats</em>, where a significant amounts of metadata are recorded, and <em>other arbitrary files</em>, where only a limited amount of data can be collected. Either type of file can be used for input or output, giving a total of four different interactions, two for input and two for output. These differences are described in more detail below.</p><p>The underlying data to which the API refers is determined by the interaction between a yaml configuration file (referred to here as a <em>config.yaml</em> file, and described below) provided at initialisation and the state of the remote registry at the time of processing of the <em>config.yaml</em> by the download synchronisation script (which is considered to contain the definitive version of all data at that time). The specific remote registry used is itself defined in the <em>config.yaml</em> file.</p><p>This interaction between the configuration file and the remote registry defines the “<em>local filesystem data repository</em>” that the local pipeline interacts with. The data directory can be automatically created by a <em>download synchronisation script</em>
<a href=https://github.com/ScottishCovidResponse/data_pipeline_api/tree/master/data_pipeline_api/registry>(currently found here)</a> which reads the <em>config.yaml</em> file, queries the appropriate remote registry, downloads appropriate data, and populates the local registry with the relevant metadata for those data.</p><p>When a model or script is run (as a <em>session</em> / “<em>code run</em>”), any output files are written to the data directory, and those outputs are logged in the local registry, which has itself been created (or updated) by the <em>download synchronisation script</em>. The local registry can be queried to determine whether the data generated is as intended, and if so it can then by synchronised back to the remote registry. This can be carried out automatically using an <em>upload synchronisation script</em>
<a href=https://github.com/ScottishCovidResponse/data_pipeline_api/tree/master/data_pipeline_api/registry>(currently here)</a>. When the <em>session</em> is initialised a “<em>run id</em>” is created to uniquely identify that <em>code run</em>. It is constructed by forming the SHA1 hash of the configuration file content, plus the date time string.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/FAIRDataPipeline/FDP_hugo/commit/0d6e81dfc45a2b286d476f8cd9cd80fdf58427f3 title='Last modified by Ryan J Field | November 1, 2023' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>November 1, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#data-pipeline>Data pipeline</a></li></ul></nav></div></aside></main></body></html>